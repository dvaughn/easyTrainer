<!DOCTYPE html>
<html lang="en">
<head>

	<title>Easy Trainer</title>
	<meta name="description" content="Lambda Chi Alpha at MIT is a close brotherhood with diverse interests, strong character, and a solid balance among the many responsibilites of MIT students.">
	<meta http-equiv="content-type" content="text/html;charset=UTF-8">
	
	<!--Javascript-->
    <script src="../js/jquery.js" type="text/javascript" ></script>
    <script src="../js/bootstrap.min.js" type="text/javascript" ></script>
	<script src="../js/jquery-ui.js"></script>
    <!--CSS-->
	<link href="../css/bootstrap.css" rel="stylesheet" type="text/css" />
	<link href="../css/base.css" rel="stylesheet" type="text/css" />
	<link href="../css/index.css" rel="stylesheet" type="text/css" />
<style>

.profile {
	width: 980px;
	margin-left: 20px;
	margin-bottom: 10px;
	background: white;
}
.profile .profilepic {
	border: 3px solid #eee;
	width: 195px;
}
.profile .profileinfo {

</style>

<script>

//**********************************
//*******Exercise Object ***********
//**********************************
function exerciseobj(name,difficulty,bodyareas) {
	this.name = name;
	this.difficulty = difficulty;
	this.bodyarea = bodyareas;
	this.included = false;
}

//**********************************
//**Generate Exercises**************
//**********************************

var type;
var exercises = [];
exercises.push(new exerciseobj('Reverse Hamstring Curls','Easy',['Knee','Hamstring']));
exercises.push(new exerciseobj('One-Legged Squats','Easy',['Knee','Quad']));
exercises.push(new exerciseobj('Calf Raises','Easy',['Calf']));
exercises.push(new exerciseobj('Lunges','Easy',['Knee','Quad','Hamstring']));
exercises.push(new exerciseobj('Side Squats','Easy',['Knee','Quad']));
exercises.push(new exerciseobj('Clean and Jerk','Easy',['Quad','Shoulder']));
exercises.push(new exerciseobj('Ankle Rolls','Easy',['Ankle','Foot']));
exercises.push(new exerciseobj('Quadricep Stretch','Easy',['Knee','Quad']));


//**********************************
//**Add All Exercises to List*******
//**********************************
$(document).ready(function() {	
	for (var a=0;a < exercises.length; a++) {
		b = exercises[a];
		var container = $('.exercise-container');
		var divcontent = $('<div class="exercise exercisedrag"><h5>'+b.name+'</h5><p> Difficulty: <span>'+b.difficulty+'</span></p>');
		container.append(divcontent);
	};
});

var drawExercises = function(area) {
	$('.exercise-container').empty();
	for (var a=0;a < exercises.length; a++) {
		b = exercises[a];
		for (var c=0;c < b.bodyarea.length; c++) {
			if (b.bodyarea[c] === area && b.included === false) {
				var container = $('.exercise-container');
				var divcontent = $('<div class="exercise exercisedrag"><h5>'+b.name+'</h5><p> Difficulty: <span>'+b.difficulty+'</span></p>');
				container.append(divcontent);
			}
		}
	};
	chartfunctionality();
}

//**********************************
//****Sidebar Functionality*********
//**********************************

$(document).ready(function() {
	$('.choose-exercise').click(function() {
		switchviews();
	});
	chartfunctionality();
	
	$('.newexercise').click(function() {
		var area = $(this).children().html();
		type = area;
		var sidebar_exercises = [];
		$('.exercise-container').empty();
		drawExercises(type);
		switchviews();
		chartfunctionality();
	});
});

var switchviews = function() {
	if ($('.selectnewexercise').is(':visible')) {
		$('.selectnewexercise').slideToggle('slow',function() {
			$('.exercise-container').slideToggle('slow');
		});
	} else {
		$('.exercise-container').slideToggle('slow',function() {
			$('.selectnewexercise').slideToggle('slow');
		});
	}
}

//**********************************
//**When exercise dropped into chart***
//**********************************
var addExercise = function(handle) {
	var header = $(handle).children('h5').html();
	var title = $("<div class='exercise-title'>"+header+"</div>");
	var row = $("<div class='chart-row'></div>");
	var deletediv = $("<div class='delete'>x</div>");
	row.append(title);
	for (var a=0; a < 5; a++){
		var columns = $("<div class='exercise1 setsrep'>3 x 15</div>");
		row.append(columns);
	}
	row.append(deletediv);
	$('.chart-body').prepend(row);
	chartfunctionality();
}


//**********************************
//***Chart Functionality************
//**********************************
var chartfunctionality = function() {
	//Implement draggable
	$( ".exercisedrag" ).draggable({
		revert: "invalid",
		drag: function() {
			$('.drophere').css('display','block');
		},
		stop: function() {
			$('.drophere').css('display','none');
		},
	});
	
	//Implement droppable
	 $( ".droppable" ).droppable({
		drop: function( event, ui ) {
			addExercise(ui.draggable);
			var name = $(ui.draggable).children('h5').html();
			for (var a=0;a < exercises.length; a++) {
				if (exercises[a].name === name) {
					exercises[a].included = true;
				}
			}
			$(ui.draggable).remove();
			$('.drophere').css('display','none');
		}
	});
	
	//Delete functionality
	$('.delete').unbind('click');
	$('.delete').click(function() {
		$(this).parent().slideToggle();
		var name = $($(this).parent().children()[0]).html();
		for (var a=0;a < exercises.length; a++) {
			if (exercises[a].name === name) {
				exercises[a].included = false;
			}
		}
		drawExercises(type);
		
	});
	$('.setsrep').unbind('click');
	$('.setsrep').click(function() {
		if ($(this).children().length > 0) {
		
		} else {
			var stringval = $(this).html();
			stringval = stringval.split(' x ');
			$(this).addClass('editing');
			$(this).empty();
			var input1 = $('<input type="text" class="sets change">');
			var input2 = $('<input type="text" class="reps change" >');
			input1.val(stringval[0]);
			input2.val(stringval[1]);
			$(this).append(input1);
			$(this).append(' x ');
			$(this).append(input2);
		}
		$(this).parent().mouseleave(function() {
			var handler = $(this).children('.editing');
			var children = $(handler).children();
			$(handler).html($(children[0]).val()+' x '+$(children[1]).val());
			$(handler).removeClass('editing');
		});
	}); 
}

</script>
</head>

<body>
	<div class="header">
		<div class="navbar">
			<div class="navbar-inner">
				<div class="navbar-contain">
					<a class="brand" href="#"><img class='logo' src="../img/prod/logo.png"/></a>
					<ul class="nav pull-right">
						 <li class="dropdown">
							<a href="#" class="dropdown-toggle" data-toggle="dropdown">
							Athletes
							<b class="caret"></b>
							</a>
							<ul class="dropdown-menu">
								<li><a href='#'>Kobe Bryant</a></li>
								<li><a href='#'>John Wenzel</a></li>
								<li><a href='#'>Add New Athlete</a></li>
							</ul>
						</li>
						<li><a href="#">Sign Out</a></li>
					</ul>
				</div>
			</div>
		</div>
	</div>
	
	<div class="main-container">
		<div class="profile well">
			<img class="profilepic" src="../img/prod/kobe.jpg"/>
			<div clas="profileinfo">
				<h2>Kobe Bryant</h2>
				<h3> Men's Basketball</h3>
				<h4> 6'7" 230lbs</h4>
				<h4> Lower Merion, PA </h4>
				<h5> Injury: Torn Achilles Tendon</h5>
			</div>
		</div>
		<div class="exercise-select well span3">
		<div class="choose-exercise gradientbg">
			<h6> Select Different Body Area<i class="icon-search icon-white"></i></h6>
		</div>
		<div class="selectnewexercise">
			<div class="newexercise">
				<h5>Knee</h5>
			</div>
			<div class="newexercise">
				<h5>Quad</h5>
			</div>
			<div class="newexercise">
				<h5>Ankle</h5>
			</div>
			<div class="newexercise">
				<h5>Shoulder</h5>
			</div>
			<div class="newexercise">
				<h5>Calf</h5>
			</div>
		</div>
		<div class="exercise-container">
		</div>
	</div>

		<div class="chart well droppable">
		<div class="chart-header gradientbg">
			<div class='title'> Exercise </div>
			<div class='day'>
				<p>Week 1</p>
				<p> April 20th</p>
			</div>
			<div class='day'>
				<p>Week 2</p>
				<p> April 21st</p>
			</div>
			<div class='day'>
				<p>Week 3</p>
				<p> April 22nd</p>
			</div>
			<div class='day'>
				<p>Week 4</p>
				<p> April 23rd</p>
			</div>
			<div class='day'>
				<p>Week 5</p>
				<p> April 24th</p>
			</div>
		</div>
		<div class="drophere">
			<h1> Drop Exercises Here</h1>
		</div>
		<div class='chart-body'>
		
		</div>
	</div>
		<div class="clear"></div>
	</div>

	<div class="footer">
		<p>Easy Trainer created by Mitchell Kates, Derek Vaughn, James Arana, and Asa Oines for UI Design and Implementation Spring 2013</p>
	</div>
</body>
</html>